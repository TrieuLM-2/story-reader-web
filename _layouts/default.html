<!DOCTYPE html>
<html lang="{{ site.lang | default: 'vi' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#16a085">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}">
    
    <!-- SEO -->
    {% seo %}
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Styles -->
    <link rel="stylesheet" href="{{ '/assets/css/variables.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/utilities.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" crossorigin="anonymous">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ '/favicon.ico' | relative_url }}">
    
    <!-- Structured Data -->
    {% if page.layout == 'story' %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Book",
      "name": "{{ page.title }}",
      "author": {
        "@type": "Person",
        "name": "{{ page.author }}"
      },
      {% if page.rating %}
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "{{ page.rating }}",
        "reviewCount": "{{ page.rating_count | default: 0 }}"
      },
      {% endif %}
      "datePublished": "{{ page.date | date: '%Y-%m-%d' }}",
      "inLanguage": "vi"
    }
    </script>
    {% endif %}
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Bỏ qua đến nội dung chính</a>
    
    {% include header.html %}
    {% include search.html %}

    <!-- Main Layout -->
    <div class="page-wrapper">
        <div class="content-card">
            <!-- Breadcrumb -->
            {% unless page.url == '/' or page.url == '/index.html' %}
            <nav class="breadcrumb" aria-label="Breadcrumb">
                <a href="{{ '/' | relative_url }}">Home</a>
                {% if page.category %}
                <span class="separator" aria-hidden="true">/</span>
                <a href="{{ '/' | append: page.category | append: '/' | relative_url }}">{{ page.category | capitalize }}</a>
                {% endif %}
                {% if page.title and page.url != '/' %}
                <span class="separator" aria-hidden="true">/</span>
                <span class="current" aria-current="page">{{ page.title }}</span>
                {% endif %}
            </nav>
            {% endunless %}

            <main id="main-content" role="main">
                {{ content }}
            </main>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{{ '/assets/js/script.js' | relative_url }}"></script>
    
    {% if jekyll.environment == 'production' %}
    <!-- Analytics placeholder -->
    <!-- Add Google Analytics or other tracking here -->
    {% endif %}
</body>
</html>